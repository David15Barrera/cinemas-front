<div class="space-y-10">
  <!-- Encabezado -->
  <div class="flex items-center justify-between">
    <h1 class="text-3xl font-bold flex items-center gap-2">
      <i-lucide [img]="Armchair" class="w-7 h-7"></i-lucide>
      Administración de salas de proyecciones
    </h1>
    <button
      class="btn btn-outline btn-primary flex items-center gap-2"
      (click)="openModalFormRoom()"
    >
      <i-lucide [img]="Plus" class="w-5 h-5"></i-lucide>
      Agregar sala
    </button>
  </div>

  <!-- Listado de salas -->
  <div class="card bg-base-200 shadow-md">
    <div class="card-body">
      <h2 class="card-title flex items-center gap-2">
        <i-lucide [img]="Armchair" class="w-5 h-5"></i-lucide>
        Salas del Cine
      </h2>

      <div class="overflow-x-auto mt-4">
        <table class="table w-full">
          <thead>
            <tr>
              <th>#</th>
              <th>Nombre</th>
              <th>Capacidad</th>
              <th>Columnas</th>
              <th>Filas</th>
              <th>Opiniones</th>
              <th>Estado</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <!-- for -->
            @for (room of rooms(); track room.id; let i = $index) {
            <tr>
              <th>{{ i + 1 }}</th>
              <td>{{ room.name }}</td>
              <td>{{ room.capacity }}</td>
              <td>{{ room.columns }}</td>
              <td>{{ room.rows }}</td>
              <td>
                <span
                  class="badge badge-lg"
                  [ngClass]="{
                  'badge-success': room.commentsEnabled === true,
                  'badge-warning': room.commentsEnabled === false,
                }"
                  >{{ room.commentsEnabled ? "HABILITADO" : "DESHABILITADO" }}
                </span>
              </td>
              <td>
                <span
                  class="badge badge-lg"
                  [ngClass]="{
                  'badge-warning': room.blocked === true,
                  'badge-info': room.blocked === false,
                }"
                  >{{ room.blocked ? "BLOQUEADO" : "HABILITADO" }}
                </span>
              </td>
              <td>
                <div class="flex gap-2">
                  <button
                    class="btn btn-outline btn-info btn-sm flex items-center gap-1"
                    (click)="openModalFormRoom(room)"
                  >
                    <i-lucide [img]="Edit" class="w-4 h-4"></i-lucide>
                    Editar
                  </button>
                  <button
                    class="btn btn-outline btn-accent btn-sm flex items-center gap-1"
                  >
                    <i-lucide [img]="Eye" class="w-4 h-4"></i-lucide>
                    Asientos
                  </button>
                </div>
              </td>
            </tr>
            }
            <!-- empty -->
            @empty {
            <tr>
              <td colspan="8" class="text-center">
                No hay salas registradas en este cine.
              </td>
            </tr>
            }
          </tbody>
        </table>
      </div>
      <!--  -->
    </div>
  </div>
</div>

<!-- Modal para crear sala de proyección -->
<dialog #modalFormRoom id="my_modal_1" class="modal">
  <app-form-room-modal
    [roomUpdate]="roomUpdate()"
    (close)="closeModalFormRoom()"
    (saveSucces)="eventOnSaveSucces()"
  />
</dialog>
